"use strict";(self.webpackChunkreact_native_reanimated_docs=self.webpackChunkreact_native_reanimated_docs||[]).push([[1845],{44825:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(67294),i=n(67177),s=n(72400),o=n(28033),r=n(88664),l=n(10758),m=n(26877),d=n(6328),p=n(6848);const u=r.Z(p.Circle),c={code:"function anonymous(){const{withTiming,r}=this._closure;return{r:withTiming(r.value)};}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/AnimatingProps.jsx"};function h(){const e=(0,l.y)(20),t=(0,m.uz)(function(){const t=()=>({r:(0,d.j)(e.value)});return t._closure={withTiming:d.j,r:e},t.__initData=c,t.__workletHash=4157648230789,t}());return a.createElement(i.Z,{style:g.container},a.createElement(p.Svg,{style:g.svg},a.createElement(u,{cx:"50%",cy:"50%",fill:"#b58df1",animatedProps:t})),a.createElement(s.Z,{onPress:()=>{e.value+=10},title:"Click me"}))}const g=o.Z.create({container:{flex:1,alignItems:"center"},svg:{height:250,width:"100%"}})},78954:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(67294),i=n(67177),s=n(72400),o=n(28033),r=n(10758),l=n(35842),m=n(10919),d=n(49638);const p={code:"function anonymous(){const{withSpring,translateX}=this._closure;return{transform:[{translateX:withSpring(translateX.value*2)}]};}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/AnimatingStyles.jsx"};function u(){const e=(0,r.y)(0),t=(0,l.l)(function(){const t=()=>({transform:[{translateX:(0,m.V)(2*e.value)}]});return t._closure={withSpring:m.V,translateX:e},t.__initData=p,t.__workletHash=1750108773863,t}());return a.createElement(a.Fragment,null,a.createElement(d.Z,{style:[c.box,t]}),a.createElement(i.Z,{style:c.container},a.createElement(s.Z,{onPress:()=>{e.value+=50},title:"Click me"})))}const c=o.Z.create({container:{flex:1,alignItems:"center",justifyContent:"center"},box:{height:120,width:120,backgroundColor:"#b58df1",borderRadius:20,marginVertical:50}})},29679:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>d,default:()=>k,frontMatter:()=>m,metadata:()=>p,toc:()=>c});var a=n(83117),i=(n(67294),n(3905)),s=n(78954),o=n(38035),r=n(44825),l=n(66083);const m={sidebar_position:3},d="Animating styles and props",p={unversionedId:"fundamentals/animating-styles-and-props",id:"fundamentals/animating-styles-and-props",title:"Animating styles and props",description:"In the last section, we learned how to make simple animations, what shared values are and how to use them. Now, we'll learn a different way of passing animation styles to components. We'll also go over the difference between animating styles and props and how to handle them using useAnimatedStyle and useAnimatedProps.",source:"@site/docs/fundamentals/animating-styles-and-props.mdx",sourceDirName:"fundamentals",slug:"/fundamentals/animating-styles-and-props",permalink:"/react-native-reanimated/docs/fundamentals/animating-styles-and-props",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/fundamentals/animating-styles-and-props.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Your First Animation",permalink:"/react-native-reanimated/docs/fundamentals/your-first-animation"},next:{title:"Customizing animations",permalink:"/react-native-reanimated/docs/fundamentals/customizing-animation"}},u={},c=[{value:"Animating styles",id:"animating-styles",level:2},{value:"Animating props",id:"animating-props",level:2},{value:"Summary",id:"summary",level:2},{value:"What&#39;s next?",id:"whats-next",level:2}],h=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},g=h("CollapsibleCode"),y=h("InteractiveExample"),f={toc:c},v="wrapper";function k(e){let{components:t,...n}=e;return(0,i.kt)(v,(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"animating-styles-and-props"},"Animating styles and props"),(0,i.kt)("p",null,"In ",(0,i.kt)("a",{parentName:"p",href:"/docs/fundamentals/your-first-animation"},"the last section"),", we learned how to make simple animations, what shared values are and how to use them. Now, we'll learn a different way of passing animation styles to components. We'll also go over the difference between animating styles and props and how to handle them using ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedProps"),"."),(0,i.kt)("h2",{id:"animating-styles"},"Animating styles"),(0,i.kt)("p",null,"As we learned in the previous section we can animate styles by ",(0,i.kt)("a",{parentName:"p",href:"/docs/fundamentals/glossary#animations-in-inline-styling"},"passing shared values inline")," to the elements' ",(0,i.kt)("inlineCode",{parentName:"p"},"style")," property:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"function App() {\n  const width = useSharedValue(100);\n\n  return <Animated.View style={{ width }} />;\n}\n")),(0,i.kt)("p",null,"In basic cases, this syntax works well but it has one big downside. It doesn't allow to access the value stored in a shared value. For example, it's not possible to build more complex animations by using inline styling to multiply this value (or do any other mathematical operation) before assigning it to the ",(0,i.kt)("inlineCode",{parentName:"p"},"style")," prop."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"<Animated.View style={{ width: width * 5 }} /> // this won't work\n")),(0,i.kt)("p",null,"Let's suppose we have an example with a box which moves to the right on every button press:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"{5,10}","{5,10}":!0},'function App() {\n  const translateX = useSharedValue(0);\n\n  const handlePress = () => {\n    translateX.value = withSpring(translateX.value + 50);\n  };\n\n  return (\n    <View style={styles.container}>\n      <Animated.View style={[styles.box, { transform: [{ translateX }] }]} />\n      <Button onPress={handlePress} title="Click me" />\n    </View>\n  );\n}\n')),(0,i.kt)("p",null,"If we would like to customize how our shared value changes based on some user input, (e.g. multiplying it by 2 or following some other mathematical equation) we couldn't use inline styling."),(0,i.kt)("p",null,"Luckily, the ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," hook comes to the rescue. It adds additional control and flexibility over your animation. This can be really useful when creating a bit more complicated animations which include conditional statements or loops."),(0,i.kt)("p",null,"Let's see it in action:"),(0,i.kt)(g,{showLines:[8,29],src:o.Z,mdxType:"CollapsibleCode"}),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," lets you access the value stored in a shared value. Thanks to that we could multiply the value by ",(0,i.kt)("inlineCode",{parentName:"p"},"2")," before assigning it to ",(0,i.kt)("inlineCode",{parentName:"p"},"style"),". This hook has one more advantage over passing animations to inline styles. It allows you to keep all the animation-related logic in one place."),(0,i.kt)("p",null,"You can see it in action in the example below:"),(0,i.kt)(y,{src:o.Z,component:(0,i.kt)(s.Z,{mdxType:"AnimatingStyles"}),mdxType:"InteractiveExample"}),(0,i.kt)("h2",{id:"animating-props"},"Animating props"),(0,i.kt)("p",null,"Most of the values that developers animate (",(0,i.kt)("inlineCode",{parentName:"p"},"width"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"color"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"transform")," etc.) are modified by passing them as an object to the ",(0,i.kt)("inlineCode",{parentName:"p"},"style")," property of an element. But that's not always the case."),(0,i.kt)("p",null,"Sometimes we'd like to animate not just styles but also the props which are passed to the component."),(0,i.kt)("p",null,"For example, let's say we would like to animate SVG elements. Instead of passing values to the ",(0,i.kt)("inlineCode",{parentName:"p"},"style")," property, values are defined as props:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'<Circle cx="50" cy="50" r="10" fill="blue" />\n')),(0,i.kt)("p",null,"Reanimated comes with just a handful of built-in components like ",(0,i.kt)("inlineCode",{parentName:"p"},"Animated.View")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Animated.ScrollView"),". For components which aren't a part of Reanimated, to make their props animatable, we need to wrap them with ",(0,i.kt)("a",{parentName:"p",href:"/docs/core/createAnimatedComponent"},(0,i.kt)("inlineCode",{parentName:"a"},"createAnimatedComponent")),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"import Animated from 'react-native-reanimated';\nimport { Circle } from 'react-native-svg';\n\nconst AnimatedCircle = Animated.createAnimatedComponent(Circle);\n")),(0,i.kt)("p",null,"To animate the radius of the SVG circle we can simply pass the shared value as a prop:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"{6}","{6}":!0},'function App() {\n  const r = useSharedValue(10);\n\n  return (\n    <Svg>\n      <AnimatedCircle cx="50" cy="50" r={r} fill="blue" />\n    </Svg>\n  );\n}\n')),(0,i.kt)("p",null,"This approach works just fine but same as ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," for animating styles we can encapsulate the animation logic and gain access to the ",(0,i.kt)("inlineCode",{parentName:"p"},".value")," property of a shared value by using ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedProps"),"."),(0,i.kt)("p",null,"So if we'd like to smoothly increase the radius of a circle by ",(0,i.kt)("inlineCode",{parentName:"p"},"10px")," on each button press we could use ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedProps"),":"),(0,i.kt)(g,{showLines:[9,39],src:l.Z,mdxType:"CollapsibleCode"}),(0,i.kt)("p",null,"In a function which ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedProps")," takes as an argument, we return an object with all the props we'd like to animate. Then we can pass the value which ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedProps")," returns to the ",(0,i.kt)("inlineCode",{parentName:"p"},"animatedProps")," prop of an Animated component."),(0,i.kt)("p",null,"Check out the full example below:"),(0,i.kt)(y,{src:l.Z,component:(0,i.kt)(r.Z,{mdxType:"AnimatingProps"}),mdxType:"InteractiveExample"}),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"In this section, we went through the differences between animating styles and props and how to use ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"useAnimatedProps"),". To sum up:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Passing shared values to inline styles is a simple way of creating animations but it has some limitations."),(0,i.kt)("li",{parentName:"ul"},"Difference between animating ",(0,i.kt)("inlineCode",{parentName:"li"},"props")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"styles")," is that props are not passed to the ",(0,i.kt)("inlineCode",{parentName:"li"},"style")," object, but rather as separate props of the component."),(0,i.kt)("li",{parentName:"ul"},"By using ",(0,i.kt)("inlineCode",{parentName:"li"},"useAnimatedStyle")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"useAnimatedProps"),", you can access the value stored in a shared value. This can add additional control over the animation."),(0,i.kt)("li",{parentName:"ul"},"You can make your own animatable components by wrapping them with ",(0,i.kt)("inlineCode",{parentName:"li"},"Animated.createAnimatedComponent"),".")),(0,i.kt)("h2",{id:"whats-next"},"What's next?"),(0,i.kt)("p",null,"In ",(0,i.kt)("a",{parentName:"p",href:"/docs/fundamentals/customizing-animation"},"the next section"),", we'll learn more about animation functions and how to customize their behavior."))}k.isMDXComponent=!0},66083:(e,t,n)=>{n.d(t,{Z:()=>a});const a="import React from 'react';\nimport { Button, View, StyleSheet } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedProps,\n  withTiming,\n} from 'react-native-reanimated';\nimport { Svg, Circle } from 'react-native-svg';\n\nconst AnimatedCircle = Animated.createAnimatedComponent(Circle);\n\nexport default function App() {\n  const r = useSharedValue(20);\n\n  const handlePress = () => {\n    r.value += 10;\n  };\n\n  // highlight-start\n  const animatedProps = useAnimatedProps(() => ({\n    r: withTiming(r.value),\n  }));\n  // highlight-end\n\n  return (\n    <View style={styles.container}>\n      <Svg style={styles.svg}>\n        <AnimatedCircle\n          cx=\"50%\"\n          cy=\"50%\"\n          fill=\"#b58df1\"\n          // highlight-next-line\n          animatedProps={animatedProps}\n        />\n      </Svg>\n      <Button onPress={handlePress} title=\"Click me\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  svg: {\n    height: 250,\n    width: '100%',\n  },\n});\n"},38035:(e,t,n)=>{n.d(t,{Z:()=>a});const a="import React from 'react';\nimport { Button, View, StyleSheet } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  withSpring,\n  useAnimatedStyle,\n} from 'react-native-reanimated';\n\nexport default function App() {\n  const translateX = useSharedValue(0);\n\n  const handlePress = () => {\n    translateX.value += 50;\n  };\n\n  // highlight-start\n  const animatedStyles = useAnimatedStyle(() => ({\n    transform: [{ translateX: withSpring(translateX.value * 2) }],\n  }));\n  // highlight-end\n\n  return (\n    <>\n      {/* highlight-next-line */}\n      <Animated.View style={[styles.box, animatedStyles]} />\n      <View style={styles.container}>\n        <Button onPress={handlePress} title=\"Click me\" />\n      </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  box: {\n    height: 120,\n    width: 120,\n    backgroundColor: '#b58df1',\n    borderRadius: 20,\n    marginVertical: 50,\n  },\n});\n"},10919:(e,t,n)=>{n.d(t,{V:()=>s});var a=n(81774);function i(e,t,n){if(t.configIsInvalid)return 0;const{stiffness:a,dampingRatio:i,restSpeedThreshold:s,duration:o}=t;return function(e){let{min:t,max:n,func:a,maxIterations:i=20}=e,s=i,o=(n+t)/2;for(;Math.abs(a(o))>5e-5&&s>0;)s-=1,a(o)<0?t=o:n=o,o=(t+n)/2;return o}({min:0,max:100,func:t=>{const r=(t*n*n+a*e*e)/(Math.exp(1-.5*i)*a);return-2*t/(2*i*Math.sqrt(a*t))*1e3*Math.log(.01*s/r)-o}})}function s(e,t,n){return(0,a.oF)(e,(()=>{const a={damping:10,mass:1,stiffness:100,overshootClamping:!1,restDisplacementThreshold:.01,restSpeedThreshold:2,velocity:0,duration:2e3,dampingRatio:.5,...t,useDuration:!!(null!=t&&t.duration||null!=t&&t.dampingRatio),configIsInvalid:!1};return([a.stiffness,a.damping,a.duration,a.dampingRatio,a.restDisplacementThreshold,a.restSpeedThreshold].some((e=>e<=0))||0===a.mass)&&(a.configIsInvalid=!0,console.warn("You have provided invalid spring animation configuration! \n Value of stiffness, damping, duration and damping ratio must be greater than zero, and mass can't equal zero.")),{onFrame:function(e,t){const{toValue:n,startTimestamp:i,current:s}=e,o=t-i;if(a.useDuration&&o>=a.duration)return e.current=n,e.lastTimestamp=0,!0;if(a.configIsInvalid)return!a.useDuration&&(e.current=n,e.lastTimestamp=0,!0);const{lastTimestamp:r,velocity:l}=e,m=Math.min(t-r,64);e.lastTimestamp=t;const d=m/1e3,p=-l,u=n-s,{zeta:c,omega0:h,omega1:g}=e,{position:y,velocity:f}=c<1?function(e,t){const{toValue:n,current:a,velocity:i}=e,{zeta:s,t:o,omega0:r,omega1:l}=t,m=-i,d=n-a,p=Math.sin(l*o),u=Math.cos(l*o),c=Math.exp(-s*r*o),h=c*(p*((m+s*r*d)/l)+d*u);return{position:n-h,velocity:s*r*h-c*(u*(m+s*r*d)-l*d*p)}}(e,{zeta:c,v0:p,x0:u,omega0:h,omega1:g,t:d}):function(e,t){const{toValue:n}=e,{v0:a,x0:i,omega0:s,t:o}=t,r=Math.exp(-s*o);return{position:n-r*(i+(a+s*i)*o),velocity:r*(a*(o*s-1)+o*i*s*s)}}(e,{v0:p,x0:u,omega0:h,t:d});e.current=y,e.velocity=f;const{isOvershooting:v,isVelocity:k,isDisplacement:w}=function(e,t){const{toValue:n,velocity:a,startValue:i,current:s}=e;return{isOvershooting:!!t.overshootClamping&&(s>n&&i<n||s<n&&i>n),isVelocity:Math.abs(a)<t.restSpeedThreshold,isDisplacement:Math.abs(n-s)<t.restDisplacementThreshold}}(e,a),b=v||k&&w;return!(a.useDuration||!b)&&(e.velocity=0,e.current=n,e.lastTimestamp=0,!0)},onStart:function(e,t,n,s){e.current=t,e.startValue=t;let o=a.mass;const r=function(e,t){return(null==e?void 0:e.startTimestamp)&&(null==e?void 0:e.toValue)===t.toValue&&(null==e?void 0:e.duration)===t.duration&&(null==e?void 0:e.dampingRatio)===t.dampingRatio}(s,e),l=a.duration,m=r?null==s?void 0:s.startValue:Number(e.toValue)-t;if(e.velocity=s?(r?null==s?void 0:s.velocity:(null==s?void 0:s.velocity)+a.velocity)||0:a.velocity||0,r)e.zeta=(null==s?void 0:s.zeta)||0,e.omega0=(null==s?void 0:s.omega0)||0,e.omega1=(null==s?void 0:s.omega1)||0;else{if(a.useDuration){const t=r?l-(((null==s?void 0:s.lastTimestamp)||0)-((null==s?void 0:s.startTimestamp)||0)):l;a.duration=t,o=i(m,a,e.velocity)}const{zeta:t,omega0:n,omega1:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;if(t.configIsInvalid)return{zeta:0,omega0:0,omega1:0};if(t.useDuration){const{stiffness:n,dampingRatio:a}=t,i=Math.sqrt(n/e);return{zeta:a,omega0:i,omega1:i*Math.sqrt(1-a**2)}}{const{damping:e,mass:n,stiffness:a}=t,i=e/(2*Math.sqrt(a*n)),s=Math.sqrt(a/n);return{zeta:i,omega0:s,omega1:s*Math.sqrt(1-i**2)}}}(o,a);e.zeta=t,e.omega0=n,e.omega1=d}e.lastTimestamp=(null==s?void 0:s.lastTimestamp)||n,e.startTimestamp=r&&(null==s?void 0:s.startTimestamp)||n},toValue:e,velocity:a.velocity||0,current:e,startValue:0,callback:n,lastTimestamp:0,startTimestamp:0,zeta:0,omega0:0,omega1:0}}))}},49638:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67177);const i=(0,n(88664).Z)(a.Z)}}]);