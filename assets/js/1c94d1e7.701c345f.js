"use strict";(self.webpackChunkreact_native_reanimated_docs=self.webpackChunkreact_native_reanimated_docs||[]).push([[5793],{19310:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>V,contentTitle:()=>X,default:()=>G,frontMatter:()=>U,metadata:()=>H,toc:()=>P});var a=n(83117),r=n(67294),i=n(3905),l=n(67177),o=n(28033),s=n(10758),c=n(17020),u=n(35842),m=n(49638);const d={code:"function anonymous(frameInfo){const{t}=this._closure;t.value=frameInfo.timeSinceFirstFrame/350;}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackSimple.jsx"},f={code:"function anonymous(){const{t}=this._closure;const scale=2/(3-Math.cos(2*t.value))*200;return{transform:[{translateX:scale*Math.cos(t.value)},{translateY:scale*(Math.sin(2*t.value)/2)}]};}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackSimple.jsx"};function v(){const e=(0,s.y)(0);(0,c.N)(function(){const t=function(t){e.value=t.timeSinceFirstFrame/350};return t._closure={t:e},t.__initData=d,t.__workletHash=2719324754534,t}());const t=(0,u.l)(function(){const t=function(){const t=2/(3-Math.cos(2*e.value))*200;return{transform:[{translateX:t*Math.cos(e.value)},{translateY:t*(Math.sin(2*e.value)/2)}]}};return t._closure={t:e},t.__initData=f,t.__workletHash=0xf2c0221082b,t}());return r.createElement(l.Z,{style:h.container},r.createElement(m.Z,{style:[h.dot,t]}))}const h=o.Z.create({container:{flex:1,alignItems:"center",justifyContent:"center",height:150},dot:{width:60,height:60,borderRadius:30,backgroundColor:"#b58df1",position:"absolute"}}),b="import React from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport Animated, {\n  useFrameCallback,\n  useSharedValue,\n  useAnimatedStyle,\n} from 'react-native-reanimated';\n\nexport default function App() {\n  const t = useSharedValue(0);\n\n  // highlight-start\n  useFrameCallback((frameInfo) => {\n    t.value = frameInfo.timeSinceFirstFrame / 350;\n  });\n  // highlight-end\n\n  const infinityStyle = useAnimatedStyle(() => {\n    const scale = (2 / (3 - Math.cos(2 * t.value))) * 200;\n    return {\n      transform: [\n        { translateX: scale * Math.cos(t.value) },\n        { translateY: scale * (Math.sin(2 * t.value) / 2) },\n      ],\n    };\n  });\n\n  return (\n    <View style={styles.container}>\n      <Animated.View style={[styles.dot, infinityStyle]} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 150,\n  },\n  dot: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    backgroundColor: '#b58df1',\n    position: 'absolute',\n  },\n});\n";var p=n(12448),k=n(6328),y=n(87827),g=n(68171),C=n(70399),F=n(24404);const E=.6,A=5e-5,_=40,S=1e3,x={height:85,width:82,x:0,y:_},w={height:85,width:82,x:0,y:_},T={code:"function anonymous(frameInfo){const{DEFAULT_HORSE,horseY,DEFAULT_OBSTACLE,obstacleX,isColliding,gameOver,vx,width,VELOCITY_INCREMENT}=this._closure;const{timeSincePreviousFrame:dt}=frameInfo;if(dt==null){return;}const horse={...DEFAULT_HORSE,y:horseY.value};const obstacle={...DEFAULT_OBSTACLE,x:obstacleX.value};if(isColliding(horse,obstacle)||gameOver.value){gameOver.value=true;return;}obstacleX.value=obstacleX.value>-100?obstacleX.value-vx.value*dt:width.value;vx.value+=VELOCITY_INCREMENT;}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackDino.jsx"},j={code:"function anonymous(){const{obstacleX,DEFAULT_OBSTACLE}=this._closure;return{transform:[{translateX:obstacleX.value},{translateY:DEFAULT_OBSTACLE.y}]};}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackDino.jsx"},D={code:"function anonymous(){const{DEFAULT_HORSE,horseY}=this._closure;return{transform:[{translateX:DEFAULT_HORSE.x},{translateY:horseY.value},{rotateY:'180deg'}]};}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackDino.jsx"},I={code:"function anonymous(){const{gameOver}=this._closure;return{transform:[{translateY:gameOver.value===true?0:-1000}]};}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackDino.jsx"};function O(){const e=(0,s.y)(E),t=(0,s.y)(0),n=(0,s.y)(S),a=(0,s.y)(_),i=(0,s.y)(!1);(0,c.N)(function(){const r=function(r){const{timeSincePreviousFrame:l}=r;if(null==l)return;const o={...w,y:a.value},s={...x,x:n.value};N(o,s)||i.value?i.value=!0:(n.value=n.value>-100?n.value-e.value*l:t.value,e.value+=A)};return r._closure={DEFAULT_HORSE:w,horseY:a,DEFAULT_OBSTACLE:x,obstacleX:n,isColliding:N,gameOver:i,vx:e,width:t,VELOCITY_INCREMENT:A},r.__initData=T,r.__workletHash=9117840522125,r}());const o=(0,u.l)(function(){const e=()=>({transform:[{translateX:n.value},{translateY:x.y}]});return e._closure={obstacleX:n,DEFAULT_OBSTACLE:x},e.__initData=j,e.__workletHash=5037569845286,e}()),d=(0,u.l)(function(){const e=()=>({transform:[{translateX:w.x},{translateY:a.value},{rotateY:"180deg"}]});return e._closure={DEFAULT_HORSE:w,horseY:a},e.__initData=D,e.__workletHash=0x9aec4246908,e}()),f=(0,u.l)(function(){const e=()=>({transform:[{translateY:!0===i.value?0:-1e3}]});return e._closure={gameOver:i},e.__initData=I,e.__workletHash=1148898414657,e}()),v=()=>{a.value===_&&(a.value=(0,p.u)((0,k.j)(_-120,{easing:y.o.bezier(.3,.11,.15,.97)}),(0,k.j)(_,{easing:y.o.poly(4)})))},h=()=>{i.value=!1,n.value=S,a.value=_,e.value=E};return r.createElement(r.Fragment,null,r.createElement(C.Z,{style:R.container,onLayout:e=>{t.value=e.nativeEvent.layout.width},onPressIn:()=>{i.value?h():v()}},r.createElement(m.Z,{style:[R.overlay,f]},r.createElement(F.Z,{style:R.text},"Game Over")),r.createElement(g.Z,{style:[R.obstacle,o]},"\ud83c\udf35"),r.createElement(g.Z,{style:[R.horse,d]},"\ud83d\udc0e"),r.createElement(l.Z,{style:R.ground})))}const R=o.Z.create({container:{flex:1,height:200},horse:{position:"absolute",fontSize:80},ground:{position:"absolute",right:0,bottom:70,width:"100%",height:2,backgroundColor:"#000"},obstacle:{position:"absolute",fontSize:80},text:{fontSize:40,color:"white",backgroundColor:"rgba(0,0,0,0.5)",paddingHorizontal:8},overlay:{justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",zIndex:1}}),L={code:"function isColliding(obj1,obj2){return obj1.x<obj2.x+obj2.width&&obj1.x+obj1.width>obj2.x&&obj1.y<obj2.y+obj2.height&&obj1.y+obj1.height>obj2.y;}",location:"/home/runner/work/react-native-reanimated/react-native-reanimated/docs/src/examples/FrameCallbackDino.jsx"},N=function(){const e=function(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y};return e._closure={},e.__initData=L,e.__workletHash=3023621340167,e}(),Y="import Animated, {\n  useSharedValue,\n  useFrameCallback,\n  useAnimatedStyle,\n  withSequence,\n  withTiming,\n  Easing,\n} from 'react-native-reanimated';\nimport { View, StyleSheet, Pressable, Text } from 'react-native';\nimport React from 'react';\n\nconst HEIGHT = 200;\nconst DEFAULT_VELOCITY = 0.6;\nconst VELOCITY_INCREMENT = 0.00005;\nconst GROUND_LEVEL = 80;\nconst DEFAULT_Y = HEIGHT - GROUND_LEVEL - 80;\nconst DEFAULT_X = 1000;\n\nconst DEFAULT_OBSTACLE = {\n  height: 85,\n  width: 82,\n  x: 0,\n  y: DEFAULT_Y,\n};\nconst DEFAULT_HORSE = {\n  height: 85,\n  width: 82,\n  x: 0,\n  y: DEFAULT_Y,\n};\n\nexport default function FrameCallbackDino() {\n  const vx = useSharedValue(DEFAULT_VELOCITY);\n  const width = useSharedValue(0);\n\n  const obstacleX = useSharedValue(DEFAULT_X);\n  const horseY = useSharedValue(DEFAULT_Y);\n\n  const gameOver = useSharedValue(false);\n\n  const getDimensions = (event) => {\n    width.value = event.nativeEvent.layout.width;\n  };\n\n  // highlight-next-line\n  useFrameCallback((frameInfo) => {\n    const { timeSincePreviousFrame: dt } = frameInfo;\n    if (dt == null) {\n      return;\n    }\n\n    const horse = { ...DEFAULT_HORSE, y: horseY.value };\n    const obstacle = { ...DEFAULT_OBSTACLE, x: obstacleX.value };\n\n    if (isColliding(horse, obstacle) || gameOver.value) {\n      gameOver.value = true;\n      return;\n    }\n\n    obstacleX.value =\n      obstacleX.value > -100 ? obstacleX.value - vx.value * dt : width.value;\n\n    vx.value += VELOCITY_INCREMENT;\n    // highlight-next-line\n  });\n\n  const obstacleStyles = useAnimatedStyle(() => ({\n    transform: [\n      { translateX: obstacleX.value },\n      { translateY: DEFAULT_OBSTACLE.y },\n    ],\n  }));\n\n  const horseStyles = useAnimatedStyle(() => ({\n    transform: [\n      { translateX: DEFAULT_HORSE.x },\n      { translateY: horseY.value },\n      { rotateY: '180deg' },\n    ],\n  }));\n\n  const overlayStyles = useAnimatedStyle(() => ({\n    transform: [{ translateY: gameOver.value === true ? 0 : -1000 }],\n  }));\n\n  const handleTap = () => {\n    if (gameOver.value) {\n      handleRestart();\n    } else {\n      handleJump();\n    }\n  };\n\n  const handleJump = () => {\n    if (horseY.value === DEFAULT_Y) {\n      horseY.value = withSequence(\n        withTiming(DEFAULT_Y - 120, {\n          easing: Easing.bezier(0.3, 0.11, 0.15, 0.97),\n        }),\n        withTiming(DEFAULT_Y, { easing: Easing.poly(4) })\n      );\n    }\n  };\n\n  const handleRestart = () => {\n    gameOver.value = false;\n    obstacleX.value = DEFAULT_X;\n    horseY.value = DEFAULT_Y;\n    vx.value = DEFAULT_VELOCITY;\n  };\n\n  return (\n    <>\n      <Pressable\n        style={styles.container}\n        onLayout={getDimensions}\n        onPressIn={handleTap}>\n        <Animated.View style={[styles.overlay, overlayStyles]}>\n          <Text style={styles.text}>Game Over</Text>\n        </Animated.View>\n        <Animated.Text style={[styles.obstacle, obstacleStyles]}>\n          \ud83c\udf35\n        </Animated.Text>\n        <Animated.Text style={[styles.horse, horseStyles]}>\ud83d\udc0e</Animated.Text>\n        <View style={styles.ground} />\n      </Pressable>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    height: 200,\n  },\n  horse: {\n    position: 'absolute',\n    fontSize: 80,\n  },\n  ground: {\n    position: 'absolute',\n    right: 0,\n    bottom: GROUND_LEVEL - 10,\n    width: '100%',\n    height: 2,\n    backgroundColor: '#000',\n  },\n  obstacle: {\n    position: 'absolute',\n    fontSize: 80,\n  },\n  text: {\n    fontSize: 40,\n    color: 'white',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    paddingHorizontal: 8,\n  },\n  overlay: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'absolute',\n    width: '100%',\n    zIndex: 1,\n  },\n});\n\nfunction isColliding(obj1, obj2) {\n  'worklet';\n  return (\n    obj1.x < obj2.x + obj2.width &&\n    obj1.x + obj1.width > obj2.x &&\n    obj1.y < obj2.y + obj2.height &&\n    obj1.y + obj1.height > obj2.y\n  );\n}\n",U={sidebar_position:3},X="useFrameCallback",H={unversionedId:"advanced/useFrameCallback",id:"advanced/useFrameCallback",title:"useFrameCallback",description:"useFrameCallback lets you run a function on every frame update.",source:"@site/docs/advanced/useFrameCallback.mdx",sourceDirName:"advanced",slug:"/advanced/useFrameCallback",permalink:"/react-native-reanimated/docs/advanced/useFrameCallback",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/advanced/useFrameCallback.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"useAnimatedReaction",permalink:"/react-native-reanimated/docs/advanced/useAnimatedReaction"},next:{title:"useEvent",permalink:"/react-native-reanimated/docs/advanced/useEvent"}},V={},P=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>callback</code>",id:"callback",level:4},{value:"<code>autostart</code> <Optional />",id:"autostart-",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}],Z=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},z=Z("InteractiveExample"),M=Z("Optional"),B={toc:P},q="wrapper";function G(e){let{components:t,...n}=e;return(0,i.kt)(q,(0,a.Z)({},B,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"useframecallback"},"useFrameCallback"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"useFrameCallback")," lets you run a function on every frame update."),(0,i.kt)(z,{src:b,component:(0,i.kt)(v,{mdxType:"FrameCallbackSimple"}),mdxType:"InteractiveExample"}),(0,i.kt)("h2",{id:"reference"},"Reference"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"import { useFrameCallback } from 'react-native-reanimated';\n\nfunction App() {\n  const frameCallback = useFrameCallback((frameInfo) => {\n    // Increment a value on every frame update\n    sv.value += 1;\n  });\n\n  return (\n    <Button\n      title=\"Start/Stop\"\n      onPress={() => frameCallback.setActive(!frameCallback.isActive)}\n    />\n  );\n}\n")),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Type definitions"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"type FrameInfo = {\n  timestamp: number;\n  timeSincePreviousFrame: number | null;\n  timeSinceFirstFrame: number;\n};\n\ntype FrameCallback = {\n  setActive: (isActive: boolean) => void;\n  isActive: boolean;\n  callbackId: number;\n};\n\nfunction useFrameCallback(\n  callback: (frameInfo: FrameInfo) => void,\n  autostart = true\n): FrameCallback;\n"))),(0,i.kt)("h3",{id:"arguments"},"Arguments"),(0,i.kt)("h4",{id:"callback"},(0,i.kt)("inlineCode",{parentName:"h4"},"callback")),(0,i.kt)("p",null,"A function executed on every frame update. This function receives a ",(0,i.kt)("inlineCode",{parentName:"p"},"frameInfo")," object containing the following fields:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"timestamp")," a number indicating the system time (in milliseconds) when the last frame was rendered."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"timeSincePreviousFrame")," a number indicating the time (in milliseconds) since last frame. This value will be null on the first frame after activation. Starting from the second frame, it should be ~16 ms on 60 Hz, and ~8 ms on 120 Hz displays (provided there are no frame dropped)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"timeSinceFirstFrame")," a number indicating the time (in milliseconds) since the callback was activated.")),(0,i.kt)("h4",{id:"autostart-"},(0,i.kt)("inlineCode",{parentName:"h4"},"autostart")," ",(0,i.kt)(M,{mdxType:"Optional"})),(0,i.kt)("p",null,"Whether the callback should start automatically. Defaults to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,i.kt)("h3",{id:"returns"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"useFrameCallback")," returns an object containing these fields:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setActive")," a function that lets you start the frame callback or stop it from running"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isActive")," a boolean indicating whether a callback is running"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callbackId")," a number indicating a unique identifier of the frame callback")),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)(z,{src:Y,component:(0,i.kt)(O,{mdxType:"FrameCallbackDino"}),label:"Tap to jump",mdxType:"InteractiveExample"}),(0,i.kt)("h2",{id:"remarks"},"Remarks"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A function passed to the ",(0,i.kt)("inlineCode",{parentName:"li"},"callback")," argument is automatically ",(0,i.kt)("a",{parentName:"li",href:"/docs/fundamentals/glossary#to-workletize"},"workletized")," and ran on the ",(0,i.kt)("a",{parentName:"li",href:"/docs/fundamentals/glossary#ui-thread"},"UI thread"),".")),(0,i.kt)("h2",{id:"platform-compatibility"},"Platform compatibility"),(0,i.kt)("div",{className:"compatibility"},(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Android"),(0,i.kt)("th",{parentName:"tr",align:null},"iOS"),(0,i.kt)("th",{parentName:"tr",align:null},"Web"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:null},"\u2705"))))))}G.isMDXComponent=!0},12448:(e,t,n)=>{n.d(t,{u:()=>r});var a=n(81774);function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.oF)(t[0],(()=>{const e=t.map((e=>{const t="function"==typeof e?e():e;return t.finished=!1,t})),n=e[0];return{isHigherOrder:!0,onFrame:function(t,n){const a=e[t.animationIndex],r=a.onFrame(a,n);if(t.current=a.current,r){if(a.callback&&a.callback(!0),a.finished=!0,t.animationIndex+=1,t.animationIndex<e.length){const r=e[t.animationIndex];return r.onStart(r,a.current,n,a),!1}return!0}return!1},onStart:function(t,a,r,i){t.animationIndex=0,void 0===i&&(i=e[e.length-1]),n.onStart(n,a,r,i)},animationIndex:0,current:n.current,callback:t=>{t||e.forEach((e=>{"function"!=typeof e.callback||e.finished||e.callback(t)}))}}}))}},68171:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(24404);const r=(0,n(88664).Z)(a.Z)},49638:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67177);const r=(0,n(88664).Z)(a.Z)},35842:(e,t,n)=>{n.d(t,{l:()=>b});var a=n(67294),r=n(84831),i=n(97604),l=n(49402),o=n(81774),s=n(4463),c=n(10758),u=n(40093),m=n(41956),d=n(83442);function f(e,t,n,a){if(Array.isArray(t)&&t.forEach(((t,r)=>{f(e,t,n&&n[r],a&&a[r])})),"object"==typeof t&&t.onFrame){const r=t;let i=r.current;void 0!==a&&("object"==typeof a?void 0!==a.value?i=a.value:void 0!==a.onFrame&&(void 0!==(null==n?void 0:n.current)?i=n.current:void 0!==(null==a?void 0:a.current)&&(i=a.current)):i=a),r.callStart=e=>{r.onStart(r,i,e,n)},r.callStart(e),r.callStart=null}else"object"==typeof t&&Object.keys(t).forEach((r=>f(e,t[r],n&&n[r],a&&a[r])))}function v(e,t,n,a,r){if(!r.value)return!0;if(Array.isArray(e)){a[n]=[];let i=!0;return e.forEach(((e,l)=>{v(e,t,l,a[n],r)||(i=!1)})),i}if("object"==typeof e&&e.onFrame){let r=!0;return e.finished||(e.callStart&&(e.callStart(t),e.callStart=null),r=e.onFrame(e,t),e.timestamp=t,r&&(e.finished=!0,e.callback&&e.callback(!0))),a[n]=e.current,r}if("object"==typeof e){a[n]={};let i=!0;return Object.keys(e).forEach((l=>{v(e[l],t,l,a[n],r)||(i=!1)})),i}return a[n]=e,!0}function h(e,t){if(Array.isArray(e))for(const n of e)h(n,t);else if("object"==typeof e&&void 0===e.value)for(const n of Object.keys(e))h(e[n],n);else if(void 0!==t&&"object"==typeof e&&void 0!==e.value)throw new Error(`invalid value passed to \`${t}\`, maybe you forgot to use \`.value\`?`)}function b(e,t,b){const p=(0,m.S)(),k=(0,a.useRef)();let y=Object.values(e._closure??{});var g;(0,d.Wr)()&&(!y.length&&null!==(g=t)&&void 0!==g&&g.length&&(y=t));const C=b?Array.isArray(b)?b:[b]:[],F=b?(0,u.Nq)(C):null,E=(0,c.y)(!0),A=(0,a.useRef)({});if(t?t.push(e.__workletHash):t=[...y,e.__workletHash],F&&t.push(F),!k.current){const t=(0,o.AX)(e);(0,u.Dl)(t),k.current={initial:{value:t,updater:e},remoteState:(0,r.I1)({last:t,animations:{},isAnimationCancelled:!1,isAnimationRunning:!1}),viewDescriptors:(0,m.G)()}}const{initial:_,remoteState:S,viewDescriptors:x}=k.current,w=x.sharableViewDescriptors,T=s.Z.native?void 0:p;return t.push(w),(0,a.useEffect)((()=>{let t,a=e;b&&(a=()=>{const t=e();return C.forEach((e=>{e(t)})),t}),t=(0,d.V5)()?()=>{!function(e,t,a,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];const c=a.animations??{},m=t()??{},d=a.last;let h,b=!1;Object.keys(c).forEach((e=>{const t=m[e];(0,u.mE)(t)||delete c[e]})),Object.keys(m).forEach((e=>{const t=m[e];(0,u.mE)(t)&&(h=n.g.__frameTimestamp||performance.now(),f(h,t,c[e],d[e]),c[e]=t,b=!0)})),b?(a.animations=c,a.isAnimationRunning||(a.isAnimationCancelled=!1,a.isAnimationRunning=!0,function t(n){const{animations:c,last:u,isAnimationCancelled:m}=a;if(m)return void(a.isAnimationRunning=!1);const d={};let f=!0;Object.keys(c).forEach((e=>{v(c[e],n,e,d,i)?(u[e]=d[e],delete c[e]):f=!1})),Object.keys(d).length&&(0,l.RH)(e,d,r,o,s),f?a.isAnimationRunning=!1:requestAnimationFrame(t)}(h))):(a.isAnimationCancelled=!0,a.animations=[]),a.last=m,(0,u.wU)(d,m)||(0,l.RH)(e,m,r,o,s)}(w,e,S,T,E,A,C)}:()=>{!function(e,t,a,r,i){const o=a.animations??{},s=t()??{},c=a.last,m={};let d,h=!1,b=!1;for(const l in s){const e=s[l];(0,u.mE)(e)?(d=n.g.__frameTimestamp||performance.now(),f(d,e,o[l],c[l]),o[l]=e,h=!0):(b=!0,m[l]=e,delete o[l])}if(h){const t=n=>{const{animations:o,last:s,isAnimationCancelled:c}=a;if(c)return void(a.isAnimationRunning=!1);const u={};let m=!0;for(const e in o)v(o[e],n,e,u,i)?(s[e]=u[e],delete o[e]):m=!1;u&&(0,l.ZP)(e,u,r),m?a.isAnimationRunning=!1:requestAnimationFrame(t)};a.animations=o,a.isAnimationRunning||(a.isAnimationCancelled=!1,a.isAnimationRunning=!0,t(d)),b&&(0,l.ZP)(e,m,r)}else a.isAnimationCancelled=!0,a.animations=[],(0,u.wU)(c,s)||(0,l.ZP)(e,s,r);a.last=s}(w,a,S,T,E)};const o=(0,r.Rn)(t,y);return()=>{(0,i.BV)(o)}}),t),(0,a.useEffect)((()=>(E.value=!0,()=>{E.value=!1})),[]),h(_.value),{}.JEST_WORKER_ID?{viewDescriptors:x,initial:_,viewsRef:p,animatedStyle:A}:{viewDescriptors:x,initial:_,viewsRef:p}}},17020:(e,t,n)=>{n.d(t,{N:()=>s});var a=n(67294),r=n(12717);const i=(0,r.Um)((()=>{const e={frameCallbackRegistry:new Map,activeFrameCallbacks:new Set,previousFrameTimestamp:null,nextCallId:0,runCallbacks(e){const t=n=>{if(e!==this.nextCallId)return;null===this.previousFrameTimestamp&&(this.previousFrameTimestamp=n);const a=n-this.previousFrameTimestamp;this.activeFrameCallbacks.forEach((e=>{const t=this.frameCallbackRegistry.get(e),{startTime:r}=t;null===r?(t.startTime=n,t.callback({timestamp:n,timeSincePreviousFrame:null,timeSinceFirstFrame:0})):t.callback({timestamp:n,timeSincePreviousFrame:a,timeSinceFirstFrame:n-r})})),this.activeFrameCallbacks.size>0?(this.previousFrameTimestamp=n,requestAnimationFrame(t)):this.previousFrameTimestamp=null};1===this.activeFrameCallbacks.size&&e===this.nextCallId&&requestAnimationFrame(t)},registerFrameCallback(e,t){this.frameCallbackRegistry.set(t,{callback:e,startTime:null})},unregisterFrameCallback(e){this.manageStateFrameCallback(e,!1),this.frameCallbackRegistry.delete(e)},manageStateFrameCallback(e,t){if(-1!==e)if(t)this.activeFrameCallbacks.add(e),this.runCallbacks(this.nextCallId);else{this.frameCallbackRegistry.get(e).startTime=null,this.activeFrameCallbacks.delete(e),0===this.activeFrameCallbacks.size&&(this.nextCallId+=1)}}};n.g._frameCallbackRegistry=e}));function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=new class{constructor(){l(this,"nextCallbackId",0),i()}registerFrameCallback(e){if(!e)return-1;const t=this.nextCallbackId;return this.nextCallbackId++,(0,r.m_)((()=>{n.g._frameCallbackRegistry.registerFrameCallback(e,t)}))(),t}unregisterFrameCallback(e){(0,r.m_)((()=>{n.g._frameCallbackRegistry.unregisterFrameCallback(e)}))()}manageStateFrameCallback(e,t){(0,r.m_)((()=>{n.g._frameCallbackRegistry.manageStateFrameCallback(e,t)}))()}};function s(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,a.useRef)({setActive:e=>{o.manageStateFrameCallback(n.current.callbackId,e),n.current.isActive=e},isActive:t,callbackId:-1});return(0,a.useEffect)((()=>(n.current.callbackId=o.registerFrameCallback(e),n.current.setActive(n.current.isActive),()=>{o.unregisterFrameCallback(n.current.callbackId),n.current.callbackId=-1})),[e,t]),n.current}},40093:(e,t,n)=>{n.d(t,{Ak:()=>s,Dl:()=>d,Nq:()=>c,mE:()=>u,wU:()=>m,zX:()=>o});var a=n(67294),r=n(84831),i=n(83442),l=n(18452);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,a.useRef)(null);return null===r.current?r.current=new l.Z(e,t):n&&r.current.updateWorklet(e),r}function s(e,t){const n=(0,a.useRef)(null);null===n.current&&(n.current={context:(0,r.I1)({}),savedDependencies:[]}),(0,a.useEffect)((()=>()=>{n.current=null}),[]);const{context:l,savedDependencies:o}=n.current;t=function(e,t){const n=Object.values(t).filter((e=>void 0!==e));e?e.push(c(n)):e=n.map((e=>({workletHash:e.__workletHash,closure:e._closure})));return e}(t,e);const s=!function(e,t){function n(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}const a="function"==typeof Object.is?Object.is:n;function r(e,t){if(!e||!t||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!a(e[n],t[n]))return!1;return!0}return r(e,t)}(t,o);n.current.savedDependencies=t;return{context:l,doDependenciesDiffer:s,useWeb:(0,i.$L)()||(0,i.V5)()}}function c(e){return Object.values(e).reduce(((e,t)=>e+t.__workletHash.toString()),"")}function u(e){return Array.isArray(e)?e.some(u):"object"==typeof e&&(void 0!==e.onFrame||Object.values(e).some(u))}function m(e,t){const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let r=0;r<n.length;r++)if(e[n[r]]!==t[n[r]])return!1;return!0}const d=e=>{if("object"!=typeof e)throw new Error(`useAnimatedStyle has to return an object, found ${typeof e} instead`);if(Array.isArray(e))throw new Error("useAnimatedStyle has to return an object and cannot return static styles combined with dynamic ones. Please do merging where a component receives props.")}}}]);