"use strict";(self.webpackChunkreact_native_reanimated_docs=self.webpackChunkreact_native_reanimated_docs||[]).push([[823],{78180:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>y,contentTitle:()=>f,default:()=>x,frontMatter:()=>g,metadata:()=>v,toc:()=>k});var a=n(83117),i=n(67294),o=n(3905),r=n(67177),s=n(72400),l=n(28033),d=n(10758),u=n(10919),m=n(49638);function p(){const e=(0,d.y)(100);return i.createElement(r.Z,{style:c.container},i.createElement(m.Z,{style:{...c.box,width:e}}),i.createElement(s.Z,{onPress:()=>{e.value=(0,u.V)(e.value+50)},title:"Click me"}))}const c=l.Z.create({container:{flex:1,alignItems:"center"},box:{height:100,backgroundColor:"#b58df1",borderRadius:20,marginVertical:64}}),h="import React from 'react';\nimport { Button, StyleSheet, View } from 'react-native';\nimport Animated, { useSharedValue, withSpring } from 'react-native-reanimated';\n\nexport default function App() {\n  const width = useSharedValue(100);\n\n  const handlePress = () => {\n    width.value = withSpring(width.value + 50);\n  };\n\n  return (\n    <View style={styles.container}>\n      <Animated.View style={{ ...styles.box, width }} />\n      <Button onPress={handlePress} title=\"Click me\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  box: {\n    height: 100,\n    backgroundColor: '#b58df1',\n    borderRadius: 20,\n    marginVertical: 64,\n  },\n});\n",g={sidebar_position:2},f="Your First Animation",v={unversionedId:"fundamentals/your-first-animation",id:"fundamentals/your-first-animation",title:"Your First Animation",description:"In this section, we'll guide you through the basic concepts of Reanimated. If you're new to Reanimated, you're in the right hands! We're going to start by building a simple animation which will help you develop a basic understanding of the library. Then, in the following sections, we're going to build on top of this knowledge and further expand your skills. Let's go!",source:"@site/docs/fundamentals/your-first-animation.mdx",sourceDirName:"fundamentals",slug:"/fundamentals/your-first-animation",permalink:"/react-native-reanimated/docs/fundamentals/your-first-animation",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/docs/fundamentals/your-first-animation.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/react-native-reanimated/docs/fundamentals/getting-started"},next:{title:"Animating styles and props",permalink:"/react-native-reanimated/docs/fundamentals/animating-styles-and-props"}},y={},k=[{value:"Using an Animated component",id:"using-an-animated-component",level:2},{value:"Defining a shared value",id:"defining-a-shared-value",level:2},{value:"Using a shared value",id:"using-a-shared-value",level:2},{value:"Using an animation function",id:"using-an-animation-function",level:2},{value:"Summary",id:"summary",level:2},{value:"What&#39;s next?",id:"whats-next",level:2}],w=(b="InteractiveExample",function(e){return console.warn("Component "+b+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)});var b;const N={toc:k},C="wrapper";function x(e){let{components:t,...n}=e;return(0,o.kt)(C,(0,a.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"your-first-animation"},"Your First Animation"),(0,o.kt)("p",null,"In this section, we'll guide you through the basic concepts of Reanimated. If you're new to Reanimated, you're in the right hands! We're going to start by building a simple animation which will help you develop a basic understanding of the library. Then, in the following sections, we're going to build on top of this knowledge and further expand your skills. Let's go!"),(0,o.kt)("h2",{id:"using-an-animated-component"},"Using an Animated component"),(0,o.kt)("p",null,"Let's start by having something that we could see on the screen. First, to create an animatable component you need to import an ",(0,o.kt)("inlineCode",{parentName:"p"},"Animated")," object:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"import Animated from 'react-native-reanimated';\n")),(0,o.kt)("p",null,"This ",(0,o.kt)("inlineCode",{parentName:"p"},"Animated")," object wraps React Native built-ins such as ",(0,o.kt)("inlineCode",{parentName:"p"},"View"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"ScrollView")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"FlatList"),"."),(0,o.kt)("p",null,"You use these components as any other JSX components:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"{5}","{5}":!0},"import Animated from 'react-native-reanimated';\n\nexport default function App() {\n  return (\n    <Animated.View\n      style={{\n        width: 100,\n        height: 100,\n        backgroundColor: 'violet',\n      }}\n    />\n  );\n}\n")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"You can create your own custom Animated components with ",(0,o.kt)("a",{parentName:"p",href:"/docs/core/createAnimatedComponent"},(0,o.kt)("inlineCode",{parentName:"a"},"createAnimatedComponent")),".")),(0,o.kt)("h2",{id:"defining-a-shared-value"},"Defining a shared value"),(0,o.kt)("p",null,"A ",(0,o.kt)("a",{parentName:"p",href:"/docs/fundamentals/glossary#shared-value"},"shared value")," is a driving factor of all your animations. You can think of it as a React state which is automagically kept in sync between the \u201cJavaScript\u201d and the \u201cnative\u201d side of your app (hence the name). You create shared values using a ",(0,o.kt)("inlineCode",{parentName:"p"},"useSharedValue")," hook:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useSharedValue } from 'react-native-reanimated';\n")),(0,o.kt)("p",null,"As with any other ",(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-rules.html"},"React hook"),", you need to define it in your component's body. In a shared value, you can store any JS value like ",(0,o.kt)("inlineCode",{parentName:"p"},"number"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"string")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"boolean")," but also data structures such as ",(0,o.kt)("inlineCode",{parentName:"p"},"array")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,o.kt)("p",null,"For now, let's use ",(0,o.kt)("inlineCode",{parentName:"p"},"100")," as the default value of the ",(0,o.kt)("inlineCode",{parentName:"p"},"useSharedValue")," hook and pass the returned value as an inline style of the ",(0,o.kt)("inlineCode",{parentName:"p"},"Animated.View"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"{4,9}","{4,9}":!0},"import Animated, { useSharedValue } from 'react-native-reanimated';\n\nexport default function App() {\n  const width = useSharedValue(100);\n\n  return (\n    <Animated.View\n      style={{\n        width,\n        height: 100,\n        backgroundColor: 'violet',\n      }}\n    />\n  );\n}\n")),(0,o.kt)("h2",{id:"using-a-shared-value"},"Using a shared value"),(0,o.kt)("p",null,"Let's create a very simple animation that will animate a ",(0,o.kt)("inlineCode",{parentName:"p"},"width")," of an element. We'll make it expand by ",(0,o.kt)("inlineCode",{parentName:"p"},"50px")," on each button press. We can do this by modifying a shared value connected to the ",(0,o.kt)("inlineCode",{parentName:"p"},"width")," property of an ",(0,o.kt)("inlineCode",{parentName:"p"},"Animated.View")," component. I know it might sound complicated, but it's actually quite simple."),(0,o.kt)("p",null,"Values stored in shared values are accessed and modified by their ",(0,o.kt)("inlineCode",{parentName:"p"},".value")," property."),(0,o.kt)("p",null,"There's no setter or anything - you simply mutate the ",(0,o.kt)("inlineCode",{parentName:"p"},".value")," property like there's no tomorrow."),(0,o.kt)("p",null,"Let's define a ",(0,o.kt)("inlineCode",{parentName:"p"},"handlePress")," function inside of which we'll modify the shared value:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"{8,20}","{8,20}":!0},"import { Button, View } from 'react-native';\nimport Animated, { useSharedValue } from 'react-native-reanimated';\n\nexport default function App() {\n  const width = useSharedValue(100);\n\n  const handlePress = () => {\n    width.value = width.value + 50;\n  };\n\n  return (\n    <View style={{ flex: 1, alignItems: 'center' }}>\n      <Animated.View\n        style={{\n          width,\n          height: 100,\n          backgroundColor: 'violet',\n        }}\n      />\n      <Button onPress={handlePress} title=\"Click me\" />\n    </View>\n  );\n}\n")),(0,o.kt)("p",null,"Please hold on a second before you shorten ",(0,o.kt)("inlineCode",{parentName:"p"},"width.value = width.value + 50")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"width.value += 50"),". We're preparing this code for the final step which will finally bring our animation to life!"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"It's a common mistake to modify a shared value directly like this: ",(0,o.kt)("del",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"del"},"sv = sv + 100;")),". Always remember to access the shared value by using the ",(0,o.kt)("inlineCode",{parentName:"p"},".value")," property instead. Here, the correct usage would be ",(0,o.kt)("inlineCode",{parentName:"p"},"sv.value = sv.value + 100;"),".")),(0,o.kt)("h2",{id:"using-an-animation-function"},"Using an animation function"),(0,o.kt)("p",null,"Finally, import ",(0,o.kt)("inlineCode",{parentName:"p"},"withSpring")," function and wrap around ",(0,o.kt)("inlineCode",{parentName:"p"},"width.value + 50")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"handlePress")," function so that the value which ",(0,o.kt)("inlineCode",{parentName:"p"},"withSpring")," returns modifies the shared value. This will create a bouncy spring animation that transitions the width of the element from its current value (here ",(0,o.kt)("inlineCode",{parentName:"p"},"width.value"),") to the new one (here ",(0,o.kt)("inlineCode",{parentName:"p"},"width.value + 50"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"{2,8}","{2,8}":!0},"import { Button, View } from 'react-native';\nimport Animated, { useSharedValue, withSpring } from 'react-native-reanimated';\n\nexport default function App() {\n  const width = useSharedValue(100);\n\n  const handlePress = () => {\n    width.value = withSpring(width.value + 50);\n  };\n\n  return (\n    <View style={{ flex: 1, alignItems: 'center' }}>\n      <Animated.View\n        style={{\n          width,\n          height: 100,\n          backgroundColor: 'violet',\n        }}\n      />\n      <Button onPress={handlePress} title=\"Click me\" />\n    </View>\n  );\n}\n")),(0,o.kt)("p",null,"And voil\xe0, we've made our first animation using Reanimated! You can see how it works in its full glory in a preview below:"),(0,o.kt)(w,{src:h,component:(0,o.kt)(p,{mdxType:"FirstAnimation"}),mdxType:"InteractiveExample"}),(0,o.kt)("h2",{id:"summary"},"Summary"),(0,o.kt)("p",null,"In this section, we gained a firm grasp on the Reanimated fundamentals. We learned about ",(0,o.kt)("inlineCode",{parentName:"p"},"Animated")," components, shared values and how to use them to create a simple animation. To sum up:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Animated")," components are used to define animatable elements."),(0,o.kt)("li",{parentName:"ul"},"Shared values are a driving factor of all animations and we define them using a ",(0,o.kt)("inlineCode",{parentName:"li"},"useSharedValue")," hook."),(0,o.kt)("li",{parentName:"ul"},"Shared values are always accessed and modified by their ",(0,o.kt)("inlineCode",{parentName:"li"},".value")," property (eg. ",(0,o.kt)("inlineCode",{parentName:"li"},"sv.value = 100;"),")."),(0,o.kt)("li",{parentName:"ul"},"To create smooth animations modify shared values using animation functions like ",(0,o.kt)("inlineCode",{parentName:"li"},"withTiming"))),(0,o.kt)("h2",{id:"whats-next"},"What's next?"),(0,o.kt)("p",null,"In ",(0,o.kt)("a",{parentName:"p",href:"/docs/fundamentals/animating-styles-and-props"},"the next section"),", we will learn more about how to animate styles and props using ",(0,o.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"useAnimatedProps")," hooks."))}x.isMDXComponent=!0},10919:(e,t,n)=>{n.d(t,{V:()=>o});var a=n(81774);function i(e,t,n){if(t.configIsInvalid)return 0;const{stiffness:a,dampingRatio:i,restSpeedThreshold:o,duration:r}=t;return function(e){let{min:t,max:n,func:a,maxIterations:i=20}=e,o=i,r=(n+t)/2;for(;Math.abs(a(r))>5e-5&&o>0;)o-=1,a(r)<0?t=r:n=r,r=(t+n)/2;return r}({min:0,max:100,func:t=>{const s=(t*n*n+a*e*e)/(Math.exp(1-.5*i)*a);return-2*t/(2*i*Math.sqrt(a*t))*1e3*Math.log(.01*o/s)-r}})}function o(e,t,n){return(0,a.oF)(e,(()=>{const a={damping:10,mass:1,stiffness:100,overshootClamping:!1,restDisplacementThreshold:.01,restSpeedThreshold:2,velocity:0,duration:2e3,dampingRatio:.5,...t,useDuration:!!(null!=t&&t.duration||null!=t&&t.dampingRatio),configIsInvalid:!1};return([a.stiffness,a.damping,a.duration,a.dampingRatio,a.restDisplacementThreshold,a.restSpeedThreshold].some((e=>e<=0))||0===a.mass)&&(a.configIsInvalid=!0,console.warn("You have provided invalid spring animation configuration! \n Value of stiffness, damping, duration and damping ratio must be greater than zero, and mass can't equal zero.")),{onFrame:function(e,t){const{toValue:n,startTimestamp:i,current:o}=e,r=t-i;if(a.useDuration&&r>=a.duration)return e.current=n,e.lastTimestamp=0,!0;if(a.configIsInvalid)return!a.useDuration&&(e.current=n,e.lastTimestamp=0,!0);const{lastTimestamp:s,velocity:l}=e,d=Math.min(t-s,64);e.lastTimestamp=t;const u=d/1e3,m=-l,p=n-o,{zeta:c,omega0:h,omega1:g}=e,{position:f,velocity:v}=c<1?function(e,t){const{toValue:n,current:a,velocity:i}=e,{zeta:o,t:r,omega0:s,omega1:l}=t,d=-i,u=n-a,m=Math.sin(l*r),p=Math.cos(l*r),c=Math.exp(-o*s*r),h=c*(m*((d+o*s*u)/l)+u*p);return{position:n-h,velocity:o*s*h-c*(p*(d+o*s*u)-l*u*m)}}(e,{zeta:c,v0:m,x0:p,omega0:h,omega1:g,t:u}):function(e,t){const{toValue:n}=e,{v0:a,x0:i,omega0:o,t:r}=t,s=Math.exp(-o*r);return{position:n-s*(i+(a+o*i)*r),velocity:s*(a*(r*o-1)+r*i*o*o)}}(e,{v0:m,x0:p,omega0:h,t:u});e.current=f,e.velocity=v;const{isOvershooting:y,isVelocity:k,isDisplacement:w}=function(e,t){const{toValue:n,velocity:a,startValue:i,current:o}=e;return{isOvershooting:!!t.overshootClamping&&(o>n&&i<n||o<n&&i>n),isVelocity:Math.abs(a)<t.restSpeedThreshold,isDisplacement:Math.abs(n-o)<t.restDisplacementThreshold}}(e,a),b=y||k&&w;return!(a.useDuration||!b)&&(e.velocity=0,e.current=n,e.lastTimestamp=0,!0)},onStart:function(e,t,n,o){e.current=t,e.startValue=t;let r=a.mass;const s=function(e,t){return(null==e?void 0:e.startTimestamp)&&(null==e?void 0:e.toValue)===t.toValue&&(null==e?void 0:e.duration)===t.duration&&(null==e?void 0:e.dampingRatio)===t.dampingRatio}(o,e),l=a.duration,d=s?null==o?void 0:o.startValue:Number(e.toValue)-t;if(e.velocity=o?(s?null==o?void 0:o.velocity:(null==o?void 0:o.velocity)+a.velocity)||0:a.velocity||0,s)e.zeta=(null==o?void 0:o.zeta)||0,e.omega0=(null==o?void 0:o.omega0)||0,e.omega1=(null==o?void 0:o.omega1)||0;else{if(a.useDuration){const t=s?l-(((null==o?void 0:o.lastTimestamp)||0)-((null==o?void 0:o.startTimestamp)||0)):l;a.duration=t,r=i(d,a,e.velocity)}const{zeta:t,omega0:n,omega1:u}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;if(t.configIsInvalid)return{zeta:0,omega0:0,omega1:0};if(t.useDuration){const{stiffness:n,dampingRatio:a}=t,i=Math.sqrt(n/e);return{zeta:a,omega0:i,omega1:i*Math.sqrt(1-a**2)}}{const{damping:e,mass:n,stiffness:a}=t,i=e/(2*Math.sqrt(a*n)),o=Math.sqrt(a/n);return{zeta:i,omega0:o,omega1:o*Math.sqrt(1-i**2)}}}(r,a);e.zeta=t,e.omega0=n,e.omega1=u}e.lastTimestamp=(null==o?void 0:o.lastTimestamp)||n,e.startTimestamp=s&&(null==o?void 0:o.startTimestamp)||n},toValue:e,velocity:a.velocity||0,current:e,startValue:0,callback:n,lastTimestamp:0,startTimestamp:0,zeta:0,omega0:0,omega1:0}}))}},49638:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67177);const i=(0,n(88664).Z)(a.Z)},72400:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(67294),i=n(28033),o=n(88548),r=n(24404),s=a.forwardRef(((e,t)=>{var n=e.accessibilityLabel,i=e.color,s=e.disabled,d=e.onPress,u=e.testID,m=e.title;return a.createElement(o.Z,{accessibilityLabel:n,accessibilityRole:"button",disabled:s,focusable:!s,onPress:d,ref:t,style:[l.button,i&&{backgroundColor:i},s&&l.buttonDisabled],testID:u},a.createElement(r.Z,{style:[l.text,s&&l.textDisabled]},m))}));s.displayName="Button";var l=i.Z.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}});const d=s},88548:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(83117),i=n(80102),o=n(67294),r=n(16528),s=n(94119),l=n(28033),d=n(67177),u=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function m(e,t){var n=e.activeOpacity,l=e.delayPressIn,m=e.delayPressOut,c=e.delayLongPress,h=e.disabled,g=e.focusable,f=e.onLongPress,v=e.onPress,y=e.onPressIn,k=e.onPressOut,w=e.rejectResponderTermination,b=e.style,N=(0,i.Z)(e,u),C=(0,o.useRef)(null),x=(0,r.Z)(t,C),V=(0,o.useState)("0s"),S=V[0],A=V[1],P=(0,o.useState)(null),T=P[0],I=P[1],R=(0,o.useCallback)(((e,t)=>{I(e),A(t?t/1e3+"s":"0s")}),[I,A]),D=(0,o.useCallback)((e=>{R(null!=n?n:.2,e)}),[n,R]),M=(0,o.useCallback)((e=>{R(null,e)}),[R]),Z=(0,o.useMemo)((()=>({cancelable:!w,disabled:h,delayLongPress:c,delayPressStart:l,delayPressEnd:m,onLongPress:f,onPress:v,onPressStart(e){var t=null!=e.dispatchConfig?"onResponderGrant"===e.dispatchConfig.registrationName:"keydown"===e.type;D(t?0:150),null!=y&&y(e)},onPressEnd(e){M(250),null!=k&&k(e)}})),[c,l,m,h,f,v,y,k,w,D,M]),L=(0,s.Z)(C,Z);return o.createElement(d.Z,(0,a.Z)({},N,L,{accessibilityDisabled:h,focusable:!h&&!1!==g,pointerEvents:h?"none":void 0,ref:x,style:[p.root,!h&&p.actionable,b,null!=T&&{opacity:T},{transitionDuration:S}]}))}var p=l.Z.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),c=o.memo(o.forwardRef(m));c.displayName="TouchableOpacity";const h=c}}]);